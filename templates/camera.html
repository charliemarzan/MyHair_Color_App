<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="generator" content="undefined">
  <title>MyHair-Camera</title>
 {% extends 'layout.html' %}
</head>
{% block body %}
<body>
  <header class="row header-row" id="home">
    <div class="col-xs-12 nav-column">
      <nav class="container-fluid btn-group nav-container"><a class="glyph btn btn-secondary dropdown-toggle" href="#" id="dropdownmenulink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="coffeecup-icons-menu7"></i></a>
        <nav class="container-fluid dropdown-menu dropdown-menu-right nav-top-space" aria-labelledby="dropdownmenulink">
          <a class="link-text dropdown-item" href="index.html">Home</a>
          <a class="link-text dropdown-item" href="gallery.html">Gallery</a>
        </nav>
      </nav>
      <nav class="container-fluid btn-group nav-container">
        <nav class="container-fluid dropdown-menu dropdown-menu-right nav-top-space" aria-labelledby="dropdownmenulink">
          <a class="link-text dropdown-item" href="index.html">Home</a>
          <a class="link-text dropdown-item" href="about.html">About</a>
          <a class="link-text dropdown-item" href="services.html">Services</a>
        </nav>
      </nav>
    </div>

    <div class="col-xs-12 column-1">
      <div class="container-fluid">
        <div class="subgrid">
          <div class="row subgrid-row-2">
            <div class="col-xs-12"></div>
          </div>
          <div class="row subgrid-row-8">
            <div class="col-xs-3 subgrid-column-4">
              <div class="html-element html-element-5"><video id="video" width="200px" height="100px" autoplay></video></div>
            </div>
              <button id="snap" class="link-button btn btn-outline-primary btn-lg">Capture</button>
          </div>
              <canvas id="canvas" width=400 height=300 style="object-fit: contain"></canvas>
<script>
var video = document.getElementById('video');
// Get access to the camera!
if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // Not adding `{ audio: true }` since we only want video now
    navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
        video.src = window.URL.createObjectURL(stream);
        video.play();
    });
}
// Elements for taking the snapshot
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
var video = document.getElementById('video');


var img = document.getElementById('canvas'); 

var width = canvas.clientWidth;
var height = canvas.clientHeight;
document.getElementById('canvas').style.width=document.getElementById('video').style.width;
document.getElementById('canvas').style.height=document.getElementById('video').style.height;

// Trigger photo take
document.getElementById("snap").addEventListener("click", function() {
	context.drawImage(video, 0, 0, width, height);
});
</script>
          <div class="row">
            <div class="col-xs-12"></div>
          </div>
        </div>
        <div class="subgrid">
          <div class="row subgrid-row-7">
            <!--div class="col-xs-1">
              <p class="paragraph introduction-p">Palette:</p>
            </div-->
            <div class="col-xs-1"></div>
            <div class="col-xs-10">
              <div class="html-element html-element-2"><script src="js/jscolor.js"></script>
</div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-1"></div>
            <div class="col-xs-1"></div>
            <div class="col-xs-10">
              <div class="html-element"><script src="js/custom-file-input.js">
		</script>


<a href="#" class="link-button btn btn-outline-primary btn-lg" id="btn-download" download="my-file-name.jpg">Save Image</a>
<a href="gallery.html" class="link-button btn btn-outline-primary btn-lg" id="btn">Proceed</a>
<!--input type="submit" class="link-button btn btn-outline-primary btn-lg" value="Submit!" id="upload-button" -->
</form>
		<script src="js/custom-file-input.js">
		</script>
		
<script>
  var loadFile = function(event) {
    var reader = new FileReader();
    reader.onload = function(){
      var mirror = document.getElementById('mirror');
      mirror.src = reader.result;
      var link = document.getElementById('btn-download');
        //get image link
      link.href = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  };
  var button = document.getElementById('btn-download');
	button.addEventListener('click', function (e) {
    var dataURL = canvas.toDataURL('image/jpg');
    button.href = dataURL;
	document.getElementById('btn').disabled = false;
});

</script></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <footer class="row footer-row">
    <div class="col-xs-12 footer-column">
      <footer class="container-fluid"></footer>
    </div>
  </footer>

<script>

</script>
</body>
{% endblock %}
</html>